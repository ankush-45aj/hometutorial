{"ast":null,"code":"import React,{createContext,useState,useEffect}from'react';import{me as apiMe}from'../api/auth';import{jsx as _jsx}from\"react/jsx-runtime\";export const AuthContext=/*#__PURE__*/createContext(null);export function AuthProvider(_ref){let{children}=_ref;const[user,setUser]=useState(null);useEffect(()=>{const token=localStorage.getItem('token');if(!token)return;apiMe().then(data=>{if(data&&data.user)setUser(data.user);}).catch(()=>{localStorage.removeItem('token');});},[]);const logout=()=>{localStorage.removeItem('token');setUser(null);};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,setUser,logout},children:children});}","map":{"version":3,"names":["React","createContext","useState","useEffect","me","apiMe","jsx","_jsx","AuthContext","AuthProvider","_ref","children","user","setUser","token","localStorage","getItem","then","data","catch","removeItem","logout","Provider","value"],"sources":["C:/Users/Ankush/OneDrive/Desktop/learning/project/homeTutorial/tutorial-website/frontend/src/services/auth/AuthContext.jsx"],"sourcesContent":["import React, { createContext, useState, useEffect } from 'react';\r\nimport { me as apiMe } from '../api/auth';\r\n\r\nexport const AuthContext = createContext(null);\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [user, setUser] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) return;\r\n    apiMe().then(data => {\r\n      if (data && data.user) setUser(data.user);\r\n    }).catch(() => {\r\n      localStorage.removeItem('token');\r\n    });\r\n  }, []);\r\n\r\n  const logout = () => { localStorage.removeItem('token'); setUser(null); };\r\n\r\n  return <AuthContext.Provider value={{ user, setUser, logout }}>{children}</AuthContext.Provider>;\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CACjE,OAASC,EAAE,GAAI,CAAAC,KAAK,KAAQ,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE1C,MAAO,MAAM,CAAAC,WAAW,cAAGP,aAAa,CAAC,IAAI,CAAC,CAE9C,MAAO,SAAS,CAAAQ,YAAYA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CAEtCC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAW,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAI,CAACF,KAAK,CAAE,OACZT,KAAK,CAAC,CAAC,CAACY,IAAI,CAACC,IAAI,EAAI,CACnB,GAAIA,IAAI,EAAIA,IAAI,CAACN,IAAI,CAAEC,OAAO,CAACK,IAAI,CAACN,IAAI,CAAC,CAC3C,CAAC,CAAC,CAACO,KAAK,CAAC,IAAM,CACbJ,YAAY,CAACK,UAAU,CAAC,OAAO,CAAC,CAClC,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,MAAM,CAAGA,CAAA,GAAM,CAAEN,YAAY,CAACK,UAAU,CAAC,OAAO,CAAC,CAAEP,OAAO,CAAC,IAAI,CAAC,CAAE,CAAC,CAEzE,mBAAON,IAAA,CAACC,WAAW,CAACc,QAAQ,EAACC,KAAK,CAAE,CAAEX,IAAI,CAAEC,OAAO,CAAEQ,MAAO,CAAE,CAAAV,QAAA,CAAEA,QAAQ,CAAuB,CAAC,CAClG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}